const { sendTemplateMessage } = require("./modules/sendTemplate.js");
const phone_numbers = [
  "918130128947",
  "918178815459",
  "918368601243",
  "918375869943",
  "918439296423",
  "918510009899",
  "918512016111",
  "918527054488",
  "918586966222",
  "918595300121",
  "918708572791",
  "918745979230",
  "918800656135",
  "918826074010",
  "918826280342",
  "918920988358",
  "918929692986",
  "919015081409",
  "919015445801",
  "919115227555",
  "919161192803",
  "919170200005",
  "919212406585",
  "919311063292",
  "919313801570",
  "919354934595",
  "919555555043",
  "919555882228",
  "919582173299",
  "919599719318",
  "919667135856",
  "919671713619",
  "919711113475",
  "919711601101",
  "919711900400",
  "919716024824",
  "919718397283",
  "919729288404",
  "919799563919",
  "919810009312",
  "919810010922",
  "919810011220",
  "919810020292",
  "919810048175",
  "919810079944",
  "919810132822",
  "919810403353",
  "919810403358",
  "919810469687",
  "919810475605",
  "919810492803",
  "919810535603",
  "919810574168",
  "919810602376",
  "919810644667",
  "919811006402",
  "919811087958",
  "919811104334",
  "919811113475",
  "919811121113",
  "919811155032",
  "919811164770",
  "919811250295",
  "919811255333",
  "919811280160",
  "919811283184",
  "919811376734",
  "919811539770",
  "919811553411",
  "919811642256",
  "919811802697",
  "919811915148",
  "919818247800",
  "919818349426",
  "919818370310",
  "919818939630",
  "919870307367",
  "919871179978",
  "919871191289",
  "919871339991",
  "919871919691",
  "919873104547",
  "919873165656",
  "919873236587",
  "919873792338",
  "919873881919",
  "919873904456",
  "919891020900",
  "919891846272",
  "919899068833",
  "919899175135",
  "919899193298",
  "919899252513",
  "919899284299",
  "919899300717",
  "919899654944",
  "919899693914",
  "919899920533",
  "919899931121",
  "919899954676",
  "919899997165",
  "919910025120",
  "919910049201",
  "919910177590",
  "919910300717",
  "919910888666",
  "919911053000",
  "919953755303",
  "919958260006",
  "919971040055",
  "919971110060",
  "919999000171",
  "919999000878",
  "919999209030",
  "919999236116",
  "919999550584",
  "919999561768",
  "919999624567",
  "919999637378",
  "919999654077",
  "919999721715",
  "919999778433",
  "919999800025",
  "919999832543",
  "919999883765",
  "919999914081",
  "918368201717",
  "919069727301",
  "917011017816",
  "919811960049",
  "919560244482",
  "919811982102",
  "919599391951",
  "919718303344",
  "919810268359",
  "919319704009",
  "919990390398",
  "919599966682",
  "919990960400",
  "919999551682",
  "919312261136",
  "919810074607",
  "919958327002",
  "919899345444",
  "919711184321",
  "919599670073",
  "919910000871",
  "919810005469",
  "919350302121",
  "919999017989",
  "917027779598",
  "917065000820",
  "917217662235",
  "917277274488",
  "917557323370",
  "917703891159",
  "917838405004",
  "917840864646",
  "918010483456",
  "918094939489",
  "918368303319",
  "918368870701",
  "918447845795",
  "918448318033",
  "918459409753",
  "918510002860",
  "918510023177",
  "918570004664",
  "918586876602",
  "918586878667",
  "918595166977",
  "918595370910",
  "918750240271",
  "918750547303",
  "918766334198",
  "918800115214",
  "918826649345",
  "918860064482",
  "918860175111",
  "919053188824",
  "919118065505",
  "919171316101",
  "919210007922",
  "919211094414",
  "919212122863",
  "919212311396",
  "919212324085",
  "919212706175",
  "919250444400",
  "919254169293",
  "919266894701",
  "919310001270",
  "919310321101",
  "919312225011",
  "919312317140",
  "919319905575",
  "919354229917",
  "919555666466",
  "919555909737",
  "919560143142",
  "916396623229",
];

const delay = async (t) => new Promise((res) => setTimeout(res, t));

const main = async () => {
  let len = phone_numbers.length;
  console.log("total number of users", len);
  for (let i = 0; i < len; i++) {
    console.time("send template");
    console.log("handling user", i);
    await sendTemplateMessage(
      phone_numbers[i],
      "02f38725-1091-46eb-aaea-73d40b6fffdb"
    );
    console.time("delay");
    await delay(1000);
    console.timeEnd("delay");
    console.timeEnd("send template");
  }
};
(async () => {
  console.log("calling  main");
  await main();
  console.log("stop main");
})();

setInterval(() => {
  console.log("hello ping pong!");
}, 10000);
